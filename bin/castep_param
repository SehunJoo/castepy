#!/bin/bash

set -e


if [[ $# -ne 1 ]]; then
    echo "usage: $(basename $0) <seed> <keep>"
    echo "keep  : 0: remove 1:keep"
    exit 1
fi

seed=$1
keep=$2

echo "Convert .param generated from MS to my style"


echo
echo "Generarate seed-gencell.param"
echo
param-gen-gencell $seed

echo
echo "Generarate seed-default.param"
echo
param-gen-default $seed

param-comparison $seed-gencell $seed
mv $seed.param.cmp $seed.param

param-comparison $seed-default $seed
mv $seed.param.cmp $seed.param

sed -i 's/nextra_bands/#nextra_bands/' $seed.param

echo "## added" >> $seed.param
echo "write_cif_structure       : true" >> $seed.param

[[ $keep == "1" ]] && rm -rf *$seed-gencell.param* *$seed-default.param*
